{
    "bug_id": 7,
    "test_id": 0,
    "test_name": "org.mockitousage.bugs.deepstubs.DeepStubFailingWhenGenricNestedAsRawTypeTest.discoverDeepMockingOfGenerics",
    "test_body": "24: public void discoverDeepMockingOfGenerics() {\n25: MyClass1 myMock1 = mock(MyClass1.class, RETURNS_DEEP_STUBS);\n26: when(myMock1.getNested().getNested().returnSomething()).thenReturn(\"Hello World.\");\n27: }\n",
    "stack_trace": "org.mockito.exceptions.base.MockitoException: Raw extraction not supported for : 'null'\nat org.mockito.internal.util.reflection.GenericMetadataSupport$TypeVariableReturnType.extractRawTypeOf(GenericMetadataSupport.java:407)\nat org.mockito.internal.util.reflection.GenericMetadataSupport$TypeVariableReturnType.extractRawTypeOf(GenericMetadataSupport.java:405)\nat org.mockito.internal.util.reflection.GenericMetadataSupport$TypeVariableReturnType.rawType(GenericMetadataSupport.java:385)\nat org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs.answer(ReturnsDeepStubs.java:51)\nat org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:93)\nat org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)\nat org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:38)\nat org.mockito.internal.creation.cglib.MethodInterceptorFilter.intercept(MethodInterceptorFilter.java:59)\nat org.mockitousage.bugs.deepstubs.DeepStubFailingWhenGenricNestedAsRawTypeTest$MyClass2$$EnhancerByMockitoWithCGLIB$$da894864.getNested(<generated>)\nat org.mockitousage.bugs.deepstubs.DeepStubFailingWhenGenricNestedAsRawTypeTest.discoverDeepMockingOfGenerics(DeepStubFailingWhenGenricNestedAsRawTypeTest.java:26)",
    "covered_methods": [
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport$TypeVarBoundedType:firstBound()Ljava/lang/reflect/Type;",
            "method_body": "public Type firstBound() {\nreturn typeVariable.getBounds()[0]; //\n}",
            "method_id": 40
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport:getActualTypeArgumentFor(Ljava/lang/reflect/TypeVariable;)Ljava/lang/reflect/Type;",
            "method_body": "protected Type getActualTypeArgumentFor(TypeVariable typeParameter) {\nType type = this.contextualActualTypeParameters.get(typeParameter);\nif (type instanceof TypeVariable) {\nreturn type;\n}",
            "method_id": 41
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport:boundsOf(Ljava/lang/reflect/TypeVariable;)Lorg/mockito/internal/util/reflection/GenericMetadataSupport$BoundedType;",
            "method_body": "private BoundedType boundsOf(TypeVariable typeParameter) {\nif (typeParameter.getBounds()[0] instanceof TypeVariable) {\nreturn new TypeVarBoundedType(typeParameter);\n}",
            "method_id": 42
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport$TypeVarBoundedType:<init>(Ljava/lang/reflect/TypeVariable;)V",
            "method_body": "public TypeVarBoundedType(TypeVariable typeVariable) {\nthis.typeVariable = typeVariable;\n}",
            "method_id": 43
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:deepStub(Lorg/mockito/invocation/InvocationOnMock;Lorg/mockito/internal/util/reflection/GenericMetadataSupport;)Ljava/lang/Object;",
            "method_body": "private Object deepStub(InvocationOnMock invocation, GenericMetadataSupport returnTypeGenericMetadata) throws Throwable {\nInternalMockHandler<Object> handler = new MockUtil().getMockHandler(invocation.getMock());\nInvocationContainerImpl container = (InvocationContainerImpl) handler.getInvocationContainer();\nfor (StubbedInvocationMatcher stubbedInvocationMatcher : container.getStubbedInvocations()) {\nreturn recordDeepStubAnswer(\n}",
            "method_id": 44
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:newDeepStubMock(Lorg/mockito/internal/util/reflection/GenericMetadataSupport;Ljava/lang/Object;)Ljava/lang/Object;",
            "method_body": "private Object newDeepStubMock(GenericMetadataSupport returnTypeGenericMetadata, Object parentMock) {\nMockCreationSettings parentMockSettings = new MockUtil().getMockSettings(parentMock);\nreturn mockitoCore().mock(\n}",
            "method_id": 45
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:withSettingsUsing(Lorg/mockito/internal/util/reflection/GenericMetadataSupport;Lorg/mockito/mock/MockCreationSettings;)Lorg/mockito/MockSettings;",
            "method_body": "private MockSettings withSettingsUsing(GenericMetadataSupport returnTypeGenericMetadata, MockCreationSettings parentMockSettings) {\nMockSettings mockSettings = returnTypeGenericMetadata.hasRawExtraInterfaces() ?\nreturn propagateSerializationSettings(mockSettings, parentMockSettings)\n}",
            "method_id": 46
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:propagateSerializationSettings(Lorg/mockito/MockSettings;Lorg/mockito/mock/MockCreationSettings;)Lorg/mockito/MockSettings;",
            "method_body": "private MockSettings propagateSerializationSettings(MockSettings mockSettings, MockCreationSettings parentMockSettings) {\nreturn mockSettings.serializable(parentMockSettings.getSerializableMode());\n}",
            "method_id": 47
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:returnsDeepStubsAnswerUsing(Lorg/mockito/internal/util/reflection/GenericMetadataSupport;)Lorg/mockito/internal/stubbing/defaultanswers/ReturnsDeepStubs;",
            "method_body": "private ReturnsDeepStubs returnsDeepStubsAnswerUsing(final GenericMetadataSupport returnTypeGenericMetadata) {\nreturn new ReturnsDeepStubsSerializationFallback(returnTypeGenericMetadata);\n}",
            "method_id": 48
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:recordDeepStubAnswer(Ljava/lang/Object;Lorg/mockito/internal/stubbing/InvocationContainerImpl;)Ljava/lang/Object;",
            "method_body": "private Object recordDeepStubAnswer(final Object mock, InvocationContainerImpl container) throws Throwable {\ncontainer.addAnswer(new DeeplyStubbedAnswer(mock), false);\nreturn mock;\n}",
            "method_id": 49
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport:hasRawExtraInterfaces()Z",
            "method_body": "public boolean hasRawExtraInterfaces() {\nreturn rawExtraInterfaces().length > 0;\n}",
            "method_id": 50
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs$ReturnsDeepStubsSerializationFallback:<init>(Lorg/mockito/internal/util/reflection/GenericMetadataSupport;)V",
            "method_body": "public ReturnsDeepStubsSerializationFallback(GenericMetadataSupport returnTypeGenericMetadata) {\nthis.returnTypeGenericMetadata = returnTypeGenericMetadata;\n}",
            "method_id": 51
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs$DeeplyStubbedAnswer:<init>(Ljava/lang/Object;)V",
            "method_body": "DeeplyStubbedAnswer(Object mock) {\nthis.mock = mock;\n}",
            "method_id": 52
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport:registerTypeVariableIfNotPresent(Ljava/lang/reflect/TypeVariable;)V",
            "method_body": "private void registerTypeVariableIfNotPresent(TypeVariable typeVariable) {\nif (!contextualActualTypeParameters.containsKey(typeVariable)) {\ncontextualActualTypeParameters.put(typeVariable, boundsOf(typeVariable));\n}",
            "method_id": 53
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs$ReturnsDeepStubsSerializationFallback:actualParameterizedType(Ljava/lang/Object;)Lorg/mockito/internal/util/reflection/GenericMetadataSupport;",
            "method_body": "protected GenericMetadataSupport actualParameterizedType(Object mock) {\nreturn returnTypeGenericMetadata;\n}",
            "method_id": 54
        },
        {
            "method_signature": "org.mockito.internal.stubbing.InvocationContainerImpl:getStubbedInvocations()Ljava/util/List;",
            "method_body": "public List<StubbedInvocationMatcher> getStubbedInvocations() {\nreturn stubbed;\n}",
            "method_id": 55
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:answer(Lorg/mockito/invocation/InvocationOnMock;)Ljava/lang/Object;",
            "method_body": "public Object answer(InvocationOnMock invocation) throws Throwable {\nGenericMetadataSupport returnTypeGenericMetadata =\nClass<?> rawType = returnTypeGenericMetadata.rawType();\nif (!mockitoCore().isTypeMockable(rawType)) {\nreturn deepStub(invocation, returnTypeGenericMetadata);\n}",
            "method_id": 56
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:actualParameterizedType(Ljava/lang/Object;)Lorg/mockito/internal/util/reflection/GenericMetadataSupport;",
            "method_body": "protected GenericMetadataSupport actualParameterizedType(Object mock) {\nCreationSettings mockSettings = (CreationSettings) new MockUtil().getMockHandler(mock).getMockSettings();\nreturn GenericMetadataSupport.inferFrom(mockSettings.getTypeToMock());\n}",
            "method_id": 57
        },
        {
            "method_signature": "org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs:mockitoCore()Lorg/mockito/internal/MockitoCore;",
            "method_body": "private static MockitoCore mockitoCore() {\nreturn LazyHolder.MOCKITO_CORE;\n}",
            "method_id": 58
        },
        {
            "method_signature": "org.mockito.internal.MockitoCore:isTypeMockable(Ljava/lang/Class;)Z",
            "method_body": "public boolean isTypeMockable(Class<?> typeToMock) {\nreturn mockUtil.isTypeMockable(typeToMock);\n}",
            "method_id": 59
        }
    ]
}