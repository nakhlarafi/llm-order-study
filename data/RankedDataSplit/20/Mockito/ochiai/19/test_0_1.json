{
    "bug_id": 19,
    "test_id": 0,
    "test_name": "org.mockitousage.annotation.MockInjectionUsingSetterOrPropertyTest.shouldInsertFieldWithCorrectNameWhenMultipleTypesAvailable",
    "test_body": "public void shouldInsertFieldWithCorrectNameWhenMultipleTypesAvailable() {\nMockitoAnnotations.initMocks(this);\nassertNull(otherSuperUnderTesting.candidate1);\nassertNotNull(otherSuperUnderTesting.candidate2);",
    "stack_trace": "junit.framework.AssertionFailedError: Expected: <null> but was: candidate2\nat junit.framework.Assert.fail(Assert.java:57)\nat junit.framework.Assert.assertTrue(Assert.java:22)\nat junit.framework.Assert.assertNull(Assert.java:277)\nat junit.framework.Assert.assertNull(Assert.java:268)\nat org.mockitousage.annotation.MockInjectionUsingSetterOrPropertyTest.shouldInsertFieldWithCorrectNameWhenMultipleTypesAvailable(MockInjectionUsingSetterOrPropertyTest.java:115)",
    "covered_methods": [
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection:injectMockCandidates(Ljava/lang/Class;Ljava/util/Set;Ljava/lang/Object;)Z",
            "method_body": "private boolean injectMockCandidates(Class<?> awaitingInjectionClazz, Set<Object> mocks, Object instance) {\nboolean injectionOccurred = false;\nList<Field> orderedInstanceFields = orderedInstanceFieldsFrom(awaitingInjectionClazz);\ninjectionOccurred |= injectMockCandidatesOnFields(mocks, instance, injectionOccurred, orderedInstanceFields);\ninjectionOccurred |= injectMockCandidatesOnFields(mocks, instance, injectionOccurred, orderedInstanceFields);\nreturn injectionOccurred;\n}",
            "method_id": 20
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection:injectMockCandidatesOnFields(Ljava/util/Set;Ljava/lang/Object;ZLjava/util/List;)Z",
            "method_body": "private boolean injectMockCandidatesOnFields(Set<Object> mocks, Object instance, boolean injectionOccurred, List<Field> orderedInstanceFields) {\nfor (Iterator<Field> it = orderedInstanceFields.iterator(); it.hasNext(); ) {\nField field = it.next();\nObject injected = mockCandidateFilter.filterCandidate(mocks, field, instance).thenInject();\nif (injected != null) {\ninjectionOccurred |= true;\nmocks.remove(injected);\nit.remove();\n}\nreturn injectionOccurred;\n}",
            "method_id": 21
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection:orderedInstanceFieldsFrom(Ljava/lang/Class;)Ljava/util/List;",
            "method_body": "private List<Field> orderedInstanceFieldsFrom(Class<?> awaitingInjectionClazz) {\nList<Field> declaredFields = Arrays.asList(awaitingInjectionClazz.getDeclaredFields());\ndeclaredFields = ListUtil.filter(declaredFields, notFinalOrStatic);\nreturn new SuperTypesLastSorter().sort(declaredFields);\n}",
            "method_id": 22
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection$1:isOut(Ljava/lang/reflect/Field;)Z",
            "method_body": "public boolean isOut(Field object) {\nreturn Modifier.isFinal(object.getModifiers()) || Modifier.isStatic(object.getModifiers());\n}",
            "method_id": 23
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializationReport:fieldWasInitializedUsingContructorArgs()Z",
            "method_body": "public boolean fieldWasInitializedUsingContructorArgs() {\nreturn wasInitializedUsingConstructorArgs;\n}",
            "method_id": 24
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializationReport:fieldClass()Ljava/lang/Class;",
            "method_body": "public Class<?> fieldClass() {\nreturn fieldInstance != null ? fieldInstance.getClass() : null;\n}",
            "method_id": 25
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection:processInjection(Ljava/lang/reflect/Field;Ljava/lang/Object;Ljava/util/Set;)Z",
            "method_body": "public boolean processInjection(Field injectMocksField, Object injectMocksFieldOwner, Set<Object> mockCandidates) {\nFieldInitializationReport report = initializeInjectMocksField(injectMocksField, injectMocksFieldOwner);\nboolean injectionOccurred = false;\nClass<?> fieldClass = report.fieldClass();\nObject fieldInstanceNeedingInjection = report.fieldInstance();\nwhile (fieldClass != Object.class) {\ninjectionOccurred |= injectMockCandidates(fieldClass, newMockSafeHashSet(mockCandidates), fieldInstanceNeedingInjection);\nfieldClass = fieldClass.getSuperclass();\nreturn injectionOccurred;\n}",
            "method_id": 26
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.PropertyAndSetterInjection:initializeInjectMocksField(Ljava/lang/reflect/Field;Ljava/lang/Object;)Lorg/mockito/internal/util/reflection/FieldInitializationReport;",
            "method_body": "private FieldInitializationReport initializeInjectMocksField(Field field, Object fieldOwner) {\nFieldInitializationReport report = null;\nreport = new FieldInitializer(fieldOwner, field).initialize();\n}\nreturn report; // never null\n}",
            "method_id": 27
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer$ParameterizedConstructorInstantiator:instantiate()Lorg/mockito/internal/util/reflection/FieldInitializationReport;",
            "method_body": "public FieldInitializationReport instantiate() {\nfinal AccessibilityChanger changer = new AccessibilityChanger();\nConstructor<?> constructor = null;\nconstructor = biggestConstructor(field.getType());\nchanger.enableAccess(constructor);\nfinal Object[] args = argResolver.resolveTypeInstances(constructor.getParameterTypes());\nObject newFieldInstance = constructor.newInstance(args);\nnew FieldSetter(testClass, field).set(newFieldInstance);\nreturn new FieldInitializationReport(field.get(testClass), false, true);\nif(constructor != null) {\nchanger.safelyDisableAccess(constructor);\n}",
            "method_id": 28
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer$ParameterizedConstructorInstantiator:checkParameterized(Ljava/lang/reflect/Constructor;Ljava/lang/reflect/Field;)V",
            "method_body": "private void checkParameterized(Constructor<?> constructor, Field field) {\nif(constructor.getParameterTypes().length == 0) {\nthrow new MockitoException(\"the field \" + field.getName() + \" of type \" + field.getType() + \" has no parameterized constructor\");\n}",
            "method_id": 29
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer$ParameterizedConstructorInstantiator:biggestConstructor(Ljava/lang/Class;)Ljava/lang/reflect/Constructor;",
            "method_body": "private Constructor<?> biggestConstructor(Class<?> clazz) {\nfinal List<Constructor<?>> constructors = Arrays.asList(clazz.getDeclaredConstructors());\nCollections.sort(constructors, byParameterNumber);\nConstructor<?> constructor = constructors.get(0);\ncheckParameterized(constructor, field);\nreturn constructor;\n}",
            "method_id": 30
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializationReport:fieldInstance()Ljava/lang/Object;",
            "method_body": "public Object fieldInstance() {\nreturn fieldInstance;\n}",
            "method_id": 31
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer:checkNotAbstract(Ljava/lang/reflect/Field;)V",
            "method_body": "private void checkNotAbstract(Field field) {\nif(Modifier.isAbstract(field.getType().getModifiers())) {\n}",
            "method_id": 32
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.SuperTypesLastSorter:sort(Ljava/util/Collection;)Ljava/util/List;",
            "method_body": "public List<Field> sort(Collection<? extends Field> unsortedFields)\nList<Field> fields = new ArrayList<Field>(unsortedFields);\nCollections.sort(fields, compareFieldsByName);\nint i = 0;\nwhile (i < fields.size() - 1) {\nField f = fields.get(i);\nClass<?> ft = f.getType();\nint newPos = i;\nfor (int j = i + 1; j < fields.size(); j++) {\nClass<?> t = fields.get(j).getType();\nif (ft != t && ft.isAssignableFrom(t)) {\nif (newPos == i) {\ni++;\n}\nreturn fields;\n}",
            "method_id": 33
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer:checkNotInterface(Ljava/lang/reflect/Field;)V",
            "method_body": "private void checkNotInterface(Field field) {\nif(field.getType().isInterface()) {\n}",
            "method_id": 34
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.SpyOnInjectedFieldsHandler:processInjection(Ljava/lang/reflect/Field;Ljava/lang/Object;Ljava/util/Set;)Z",
            "method_body": "protected boolean processInjection(Field field, Object fieldOwner, Set<Object> mockCandidates) {\nFieldReader fieldReader = new FieldReader(fieldOwner, field);\nif(!fieldReader.isNull() && field.isAnnotationPresent(Spy.class)) {\nObject instance = fieldReader.read();\nif (new MockUtil().isMock(instance)) {\nMockito.reset(instance);\nnew FieldSetter(fieldOwner, field).set(\n}\nreturn false;\n}",
            "method_id": 35
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer:checkNotInner(Ljava/lang/reflect/Field;)V",
            "method_body": "private void checkNotInner(Field field) {\nif(field.getType().isMemberClass() && !Modifier.isStatic(field.getType().getModifiers())) {\n}",
            "method_id": 36
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.FieldInitializer:checkNotLocal(Ljava/lang/reflect/Field;)V",
            "method_body": "private void checkNotLocal(Field field) {\nif(field.getType().isLocalClass()) {\n}",
            "method_id": 37
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.scanner.InjectMocksScanner:assertNoAnnotations(Ljava/lang/reflect/Field;[Ljava/lang/Class;)V",
            "method_body": "void assertNoAnnotations(final Field field, final Class... annotations) {\nfor (Class annotation : annotations) {\nif (field.isAnnotationPresent(annotation)) {\n}",
            "method_id": 38
        },
        {
            "method_signature": "org.mockito.internal.configuration.injection.ConstructorInjection:processInjection(Ljava/lang/reflect/Field;Ljava/lang/Object;Ljava/util/Set;)Z",
            "method_body": "public boolean processInjection(Field field, Object fieldOwner, Set<Object> mockCandidates) {\nSimpleArgumentResolver simpleArgumentResolver = new SimpleArgumentResolver(mockCandidates);\nFieldInitializationReport report = new FieldInitializer(fieldOwner, field, simpleArgumentResolver).initialize();\nreturn report.fieldWasInitializedUsingContructorArgs();\n} catch (MockitoException e) {\nif(e.getCause() instanceof InvocationTargetException) {\nreturn false;\n}",
            "method_id": 39
        }
    ]
}