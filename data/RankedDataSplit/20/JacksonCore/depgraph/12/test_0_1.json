{
    "bug_id": 12,
    "test_id": 0,
    "test_name": "com.fasterxml.jackson.core.json.LocationInObjectTest.testOffsetWithObjectFieldsUsingReader",
    "test_body": "54: public void testOffsetWithObjectFieldsUsingReader() throws Exception\n55: {\n56: final JsonFactory f = new JsonFactory();\n57: char[] c = \"{\\\"f1\\\":\\\"v1\\\",\\\"f2\\\":{\\\"f3\\\":\\\"v3\\\"},\\\"f4\\\":[true,false],\\\"f5\\\":5}\".toCharArray();\n58: //            1      6      11    16 17    22      28    33 34 39      46    51\n59: JsonParser p = f.createParser(c);\n60: 61: assertEquals(JsonToken.START_OBJECT, p.nextToken());\n62: 63: assertEquals(JsonToken.FIELD_NAME, p.nextToken());\n64: assertEquals(1L, p.getTokenLocation().getCharOffset());\n65: assertEquals(JsonToken.VALUE_STRING, p.nextToken());\n66: assertEquals(6L, p.getTokenLocation().getCharOffset());\n67: 68: assertEquals(\"f2\", p.nextFieldName());\n69: assertEquals(11L, p.getTokenLocation().getCharOffset());\n70: assertEquals(JsonToken.START_OBJECT, p.nextValue());\n71: assertEquals(16L, p.getTokenLocation().getCharOffset());\n72: 73: assertEquals(\"f3\", p.nextFieldName());\n74: assertEquals(17L, p.getTokenLocation().getCharOffset());\n75: assertEquals(JsonToken.VALUE_STRING, p.nextValue());\n76: assertEquals(22L, p.getTokenLocation().getCharOffset());\n77: assertEquals(JsonToken.END_OBJECT, p.nextToken());\n78: 79: assertEquals(\"f4\", p.nextFieldName());\n80: assertEquals(28L, p.getTokenLocation().getCharOffset());\n81: assertEquals(JsonToken.START_ARRAY, p.nextValue());\n82: assertEquals(33L, p.getTokenLocation().getCharOffset());\n83: 84: assertEquals(JsonToken.VALUE_TRUE, p.nextValue());\n85: assertEquals(34L, p.getTokenLocation().getCharOffset());\n86: 87: assertEquals(JsonToken.VALUE_FALSE, p.nextValue());\n88: assertEquals(39L, p.getTokenLocation().getCharOffset());\n89: assertEquals(JsonToken.END_ARRAY, p.nextToken());\n90: 91: assertEquals(\"f5\", p.nextFieldName());\n92: assertEquals(46L, p.getTokenLocation().getCharOffset());\n93: assertEquals(JsonToken.VALUE_NUMBER_INT, p.nextToken());\n94: assertEquals(51L, p.getTokenLocation().getCharOffset());\n95: assertEquals(JsonToken.END_OBJECT, p.nextToken());\n96: 97: p.close();\n98: }\n",
    "stack_trace": "junit.framework.AssertionFailedError: expected:<6> but was:<1>\nat junit.framework.Assert.fail(Assert.java:57)\nat junit.framework.Assert.failNotEquals(Assert.java:329)\nat junit.framework.Assert.assertEquals(Assert.java:78)\nat junit.framework.Assert.assertEquals(Assert.java:159)\nat junit.framework.Assert.assertEquals(Assert.java:166)\nat junit.framework.TestCase.assertEquals(TestCase.java:324)\nat com.fasterxml.jackson.core.json.LocationInObjectTest.testOffsetWithObjectFieldsUsingReader(LocationInObjectTest.java:66)",
    "covered_methods": [
        {
            "method_signature": "com.fasterxml.jackson.core.json.ReaderBasedJsonParser:<init>(Lcom/fasterxml/jackson/core/io/IOContext;ILjava/io/Reader;Lcom/fasterxml/jackson/core/ObjectCodec;Lcom/fasterxml/jackson/core/sym/CharsToNameCanonicalizer;)V",
            "method_body": "protected final static int[] _icLatin1 = CharTypes.getInputCodeLatin1();\nprotected boolean _tokenIncomplete = false;\nsuper(ctxt, features);\n_reader = r;\n_inputBuffer = inputBuffer;\n_inputPtr = start;\n_inputEnd = end;\n_objectCodec = codec;\n_symbols = st;\n_hashSeed = st.hashSeed();\n_bufferRecyclable = bufferRecyclable;\n}",
            "method_id": 20
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory$Feature:getMask()I",
            "method_body": "public int getMask() { return (1 << ordinal()); }\npublic int getMask() { return (1 << ordinal()); }",
            "method_id": 21
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonParser$Feature:getMask()I",
            "method_body": "public int getMask() { return _mask; }\npublic int getMask() { return _mask; }",
            "method_id": 22
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonGenerator$Feature:getMask()I",
            "method_body": "public int getMask() { return _mask; }\npublic int getMask() { return _mask; }",
            "method_id": 23
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory:<init>()V",
            "method_body": "public JsonFactory() { this(null); }\npublic JsonFactory() { this(null); }",
            "method_id": 24
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory:<init>(Lcom/fasterxml/jackson/core/ObjectCodec;)V",
            "method_body": "public JsonFactory(ObjectCodec oc) { _objectCodec = oc; }\npublic JsonFactory(ObjectCodec oc) { _objectCodec = oc; }",
            "method_id": 25
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory$Feature:enabledIn(I)Z",
            "method_body": "public boolean enabledIn(int flags) { return (flags & getMask()) != 0; }\npublic boolean enabledIn(int flags) { return (flags & getMask()) != 0; }",
            "method_id": 26
        },
        {
            "method_signature": "com.fasterxml.jackson.core.io.IOContext:<init>(Lcom/fasterxml/jackson/core/util/BufferRecycler;Ljava/lang/Object;Z)V",
            "method_body": "protected final Object _sourceRef;\nprotected byte[] _readIOBuffer = null;\nprotected byte[] _writeEncodingBuffer = null;\nprotected byte[] _base64Buffer = null;\nprotected char[] _tokenCBuffer = null;\nprotected char[] _concatCBuffer = null;\nprotected char[] _nameCopyBuffer = null;\n{\n_bufferRecycler = br;\n_sourceRef = sourceRef;\n_managedResource = managedResource;\n}",
            "method_id": 27
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory:<init>(Lcom/fasterxml/jackson/core/JsonFactory;Lcom/fasterxml/jackson/core/ObjectCodec;)V",
            "method_body": "final protected static ThreadLocal<SoftReference<BufferRecycler>> _recyclerRef\nprotected final transient CharsToNameCanonicalizer _rootCharSymbols = CharsToNameCanonicalizer.createRoot();\nprotected final transient ByteQuadsCanonicalizer _byteSymbolCanonicalizer = ByteQuadsCanonicalizer.createRoot();\nprotected int _factoryFeatures = DEFAULT_FACTORY_FEATURE_FLAGS;\nprotected int _parserFeatures = DEFAULT_PARSER_FEATURE_FLAGS;\nprotected int _generatorFeatures = DEFAULT_GENERATOR_FEATURE_FLAGS;\nprotected SerializableString _rootValueSeparator = DEFAULT_ROOT_VALUE_SEPARATOR;\npublic JsonFactory() { this(null); }",
            "method_id": 28
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonLocation:getCharOffset()J",
            "method_body": "public long getCharOffset() { return _totalChars; }\npublic long getCharOffset() { return _totalChars; }",
            "method_id": 29
        },
        {
            "method_signature": "com.fasterxml.jackson.core.base.ParserBase:getTokenCharacterOffset()J",
            "method_body": "public long getTokenCharacterOffset() { return _tokenInputTotal; }\npublic long getTokenCharacterOffset() { return _tokenInputTotal; }",
            "method_id": 30
        },
        {
            "method_signature": "com.fasterxml.jackson.core.base.ParserBase:getTokenLineNr()I",
            "method_body": "public int getTokenLineNr() { return _tokenInputRow; }\npublic int getTokenLineNr() { return _tokenInputRow; }",
            "method_id": 31
        },
        {
            "method_signature": "com.fasterxml.jackson.core.base.ParserBase:getTokenColumnNr()I",
            "method_body": "public int getTokenColumnNr() {\nint col = _tokenInputCol;\nreturn (col < 0) ? col : (col + 1);\n}",
            "method_id": 32
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonStreamContext:inObject()Z",
            "method_body": "public final boolean inObject() { return _type == TYPE_OBJECT; }\npublic final boolean inObject() { return _type == TYPE_OBJECT; }",
            "method_id": 33
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonStreamContext:<init>()V",
            "method_body": "protected JsonStreamContext() { }\nprotected JsonStreamContext() { }",
            "method_id": 34
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonFactory:<clinit>()V",
            "method_body": "public final static String FORMAT_NAME_JSON = \"JSON\";\nprotected final static int DEFAULT_FACTORY_FEATURE_FLAGS = JsonFactory.Feature.collectDefaults();\nprotected final static int DEFAULT_PARSER_FEATURE_FLAGS = JsonParser.Feature.collectDefaults();\nprotected final static int DEFAULT_GENERATOR_FEATURE_FLAGS = JsonGenerator.Feature.collectDefaults();\nprivate final static SerializableString DEFAULT_ROOT_VALUE_SEPARATOR = DefaultPrettyPrinter.DEFAULT_ROOT_VALUE_SEPARATOR;\n* This <code>ThreadLocal</code> contains a {@link java.lang.ref.SoftReference}",
            "method_id": 35
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonParser$Feature:<init>(Ljava/lang/String;IZ)V",
            "method_body": "private Feature(boolean defaultState) {\n_mask = (1 << ordinal());\n_defaultState = defaultState;\n}",
            "method_id": 36
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonParser$Feature:collectDefaults()I",
            "method_body": "public static int collectDefaults()\nint flags = 0;\nfor (Feature f : values()) {\nif (f.enabledByDefault()) {\nflags |= f.getMask();\nreturn flags;\n}",
            "method_id": 37
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonParser$Feature:enabledByDefault()Z",
            "method_body": "public boolean enabledByDefault() { return _defaultState; }\npublic boolean enabledByDefault() { return _defaultState; }",
            "method_id": 38
        },
        {
            "method_signature": "com.fasterxml.jackson.core.JsonGenerator$Feature:<init>(Ljava/lang/String;IZ)V",
            "method_body": "private Feature(boolean defaultState) {\n_defaultState = defaultState;\n_mask = (1 << ordinal());\n}",
            "method_id": 39
        }
    ]
}