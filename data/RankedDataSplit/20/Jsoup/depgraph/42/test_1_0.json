{
    "bug_id": 42,
    "test_id": 1,
    "test_name": "org.jsoup.nodes.FormElementTest.usesOnForCheckboxValueIfNoValueSet",
    "test_body": "118: @Test public void usesOnForCheckboxValueIfNoValueSet() {\n119: Document doc = Jsoup.parse(\"<form><input type=checkbox checked name=foo></form>\");\n120: FormElement form = (FormElement) doc.select(\"form\").first();\n121: List<Connection.KeyVal> data = form.formData();\n122: assertEquals(\"on\", data.get(0).value());\n123: assertEquals(\"foo\", data.get(0).key());",
    "stack_trace": "junit.framework.AssertionFailedError: expected:<[on]> but was:<[]>\nat org.junit.Assert.assertEquals(Assert.java:115)\nat org.junit.Assert.assertEquals(Assert.java:144)\nat org.jsoup.nodes.FormElementTest.usesOnForCheckboxValueIfNoValueSet(FormElementTest.java:122)",
    "covered_methods": [
        {
            "method_signature": "org.jsoup.nodes.FormElement:formData()Ljava/util/List;",
            "method_body": "public List<Connection.KeyVal> formData() {\nArrayList<Connection.KeyVal> data = new ArrayList<Connection.KeyVal>();\nfor (Element el: elements) {\nif (!el.tag().isFormSubmittable()) continue; // contents are form listable, superset of submitable\nString name = el.attr(\"name\");\nif (name.length() == 0) continue;\nString type = el.attr(\"type\");\nif (\"select\".equals(el.tagName())) {\nElements options = el.select(\"option[selected]\");\nboolean set = false;\nfor (Element option: options) {\ndata.add(HttpConnection.KeyVal.create(name, option.val()));\nset = true;\n}\nif (!set) {\n} else if (\"checkbox\".equalsIgnoreCase(type) || \"radio\".equalsIgnoreCase(type)) {\nif (el.hasAttr(\"checked\")) {\nfinal String val = el.val();\ndata.add(HttpConnection.KeyVal.create(name, val));\n}\ndata.add(HttpConnection.KeyVal.create(name, el.val()));\n}\nreturn data;\n}",
            "method_id": 0
        },
        {
            "method_signature": "org.jsoup.nodes.FormElement:<init>(Lorg/jsoup/parser/Tag;Ljava/lang/String;Lorg/jsoup/nodes/Attributes;)V",
            "method_body": "private final Elements elements = new Elements();\nsuper(tag, baseUri, attributes);\n}",
            "method_id": 1
        },
        {
            "method_signature": "org.jsoup.parser.HtmlTreeBuilder:setFormElement(Lorg/jsoup/nodes/FormElement;)V",
            "method_body": "void setFormElement(FormElement formElement) {\nthis.formElement = formElement;\n}",
            "method_id": 2
        },
        {
            "method_signature": "org.jsoup.nodes.FormElement:addElement(Lorg/jsoup/nodes/Element;)Lorg/jsoup/nodes/FormElement;",
            "method_body": "public FormElement addElement(Element element) {\nelements.add(element);\nreturn this;\n}",
            "method_id": 3
        },
        {
            "method_signature": "org.jsoup.nodes.Element:val()Ljava/lang/String;",
            "method_body": "public String val() {\nif (tagName().equals(\"textarea\"))\nreturn text();\nreturn attr(\"value\");\n}",
            "method_id": 4
        },
        {
            "method_signature": "org.jsoup.parser.HtmlTreeBuilder:insertForm(Lorg/jsoup/parser/Token$StartTag;Z)Lorg/jsoup/nodes/FormElement;",
            "method_body": "FormElement insertForm(Token.StartTag startTag, boolean onStack) {\nTag tag = Tag.valueOf(startTag.name());\nFormElement el = new FormElement(tag, baseUri, startTag.attributes);\nsetFormElement(el);\ninsertNode(el);\nif (onStack)\nstack.add(el);\nreturn el;\n}",
            "method_id": 5
        },
        {
            "method_signature": "org.jsoup.helper.HttpConnection$KeyVal:value(Ljava/lang/String;)Lorg/jsoup/helper/HttpConnection$KeyVal;",
            "method_body": "public KeyVal value(String value) {\nValidate.notNull(value, \"Data value must not be null\");\nthis.value = value;\nreturn this;\n}",
            "method_id": 6
        },
        {
            "method_signature": "org.jsoup.parser.Tag:valueOf(Ljava/lang/String;)Lorg/jsoup/parser/Tag;",
            "method_body": "public static Tag valueOf(String tagName) {\nValidate.notNull(tagName);\nTag tag = tags.get(tagName);\nif (tag == null) {\ntagName = tagName.trim().toLowerCase();\nValidate.notEmpty(tagName);\ntag = tags.get(tagName);\nif (tag == null) {\ntag = new Tag(tagName);\ntag.isBlock = false;\ntag.canContainBlock = true;\nreturn tag;\n}",
            "method_id": 7
        },
        {
            "method_signature": "org.jsoup.nodes.Element:<init>(Lorg/jsoup/parser/Tag;Ljava/lang/String;Lorg/jsoup/nodes/Attributes;)V",
            "method_body": "public Element(Tag tag, String baseUri, Attributes attributes) {\nsuper(baseUri, attributes);\nValidate.notNull(tag);\nthis.tag = tag;\n}",
            "method_id": 8
        },
        {
            "method_signature": "org.jsoup.parser.HtmlTreeBuilder:setHeadElement(Lorg/jsoup/nodes/Element;)V",
            "method_body": "void setHeadElement(Element headElement) {\nthis.headElement = headElement;\n}",
            "method_id": 9
        },
        {
            "method_signature": "org.jsoup.nodes.Element:<init>(Lorg/jsoup/parser/Tag;Ljava/lang/String;)V",
            "method_body": "public Element(Tag tag, String baseUri) {\nthis(tag, baseUri, new Attributes());\n}",
            "method_id": 10
        },
        {
            "method_signature": "org.jsoup.parser.HtmlTreeBuilder:getFormElement()Lorg/jsoup/nodes/FormElement;",
            "method_body": "FormElement getFormElement() {\nreturn formElement;\n}",
            "method_id": 11
        },
        {
            "method_signature": "org.jsoup.nodes.Element:appendChild(Lorg/jsoup/nodes/Node;)Lorg/jsoup/nodes/Element;",
            "method_body": "public Element appendChild(Node child) {\nValidate.notNull(child);\nreparentChild(child);\nchildNodes.add(child);\nchild.setSiblingIndex(childNodes.size() - 1);\nreturn this;\n}",
            "method_id": 12
        },
        {
            "method_signature": "org.jsoup.nodes.Element:select(Ljava/lang/String;)Lorg/jsoup/select/Elements;",
            "method_body": "public Elements select(String cssQuery) {\nreturn Selector.select(cssQuery, this);\n}",
            "method_id": 13
        },
        {
            "method_signature": "org.jsoup.nodes.Element:tag()Lorg/jsoup/parser/Tag;",
            "method_body": "public Tag tag() {\nreturn tag;\n}",
            "method_id": 14
        },
        {
            "method_signature": "org.jsoup.nodes.Attribute:getValue()Ljava/lang/String;",
            "method_body": "public String getValue() {\nreturn value;\n}",
            "method_id": 15
        },
        {
            "method_signature": "org.jsoup.nodes.Element:nodeName()Ljava/lang/String;",
            "method_body": "public String nodeName() {\nreturn tag.getName();\n}",
            "method_id": 16
        },
        {
            "method_signature": "org.jsoup.nodes.Element:tagName()Ljava/lang/String;",
            "method_body": "public String tagName() {\nreturn tag.getName();\n}",
            "method_id": 17
        },
        {
            "method_signature": "org.jsoup.parser.Tag:isFormSubmittable()Z",
            "method_body": "public boolean isFormSubmittable() {\nreturn formSubmit;\n}",
            "method_id": 18
        },
        {
            "method_signature": "org.jsoup.nodes.Node:setParentNode(Lorg/jsoup/nodes/Node;)V",
            "method_body": "protected void setParentNode(Node parentNode) {\nif (this.parentNode != null)\nthis.parentNode = parentNode;\n}",
            "method_id": 19
        }
    ]
}