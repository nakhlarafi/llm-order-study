{
    "bug_id": 56,
    "test_id": 0,
    "test_name": "org.jsoup.nodes.DocumentTypeTest.testRoundTrip",
    "test_body": "44: @Test public void testRoundTrip() {\n45: String base = \"<!DOCTYPE html>\";\n46: assertEquals(\"<!doctype html>\", htmlOutput(base));\n47: assertEquals(base, xmlOutput(base));\n48: 49: String publicDoc = \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\";\n50: assertEquals(publicDoc, htmlOutput(publicDoc));\n51: assertEquals(publicDoc, xmlOutput(publicDoc));\n52: 53: String systemDoc = \"<!DOCTYPE html SYSTEM \\\"exampledtdfile.dtd\\\">\";\n54: assertEquals(systemDoc, htmlOutput(systemDoc));\n55: assertEquals(systemDoc, xmlOutput(systemDoc));",
    "stack_trace": "junit.framework.AssertionFailedError: expected:<<!DOCTYPE html [SYSTEM ]\"exampledtdfile.dtd\"...> but was:<<!DOCTYPE html []\"exampledtdfile.dtd\"...>\nat org.junit.Assert.assertEquals(Assert.java:115)\nat org.junit.Assert.assertEquals(Assert.java:144)\nat org.jsoup.nodes.DocumentTypeTest.testRoundTrip(DocumentTypeTest.java:54)",
    "covered_methods": [
        {
            "method_signature": "org.jsoup.nodes.DocumentType:outerHtmlHead(Ljava/lang/Appendable;ILorg/jsoup/nodes/Document$OutputSettings;)V",
            "method_body": "void outerHtmlHead(Appendable accum, int depth, Document.OutputSettings out) throws IOException {\nif (out.syntax() == Syntax.html && !has(PUBLIC_ID) && !has(SYSTEM_ID)) {\naccum.append(\"<!doctype\");\naccum.append(\"<!DOCTYPE\");\nif (has(NAME))\naccum.append(\" \").append(attr(NAME));\nif (has(PUBLIC_ID))\naccum.append(\" PUBLIC \\\"\").append(attr(PUBLIC_ID)).append('\"');\nif (has(SYSTEM_ID))\naccum.append(\" \\\"\").append(attr(SYSTEM_ID)).append('\"');\naccum.append('>');\n}",
            "method_id": 0
        },
        {
            "method_signature": "org.jsoup.nodes.DocumentType:<init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",
            "method_body": "public DocumentType(String name, String publicId, String systemId, String baseUri) {\nsuper(baseUri);\nattr(NAME, name);\nattr(PUBLIC_ID, publicId);\nattr(SYSTEM_ID, systemId);\n}",
            "method_id": 1
        },
        {
            "method_signature": "org.jsoup.nodes.DocumentType:has(Ljava/lang/String;)Z",
            "method_body": "private boolean has(final String attribute) {\nreturn !StringUtil.isBlank(attr(attribute));\n}",
            "method_id": 2
        },
        {
            "method_signature": "org.jsoup.nodes.DocumentType:outerHtmlTail(Ljava/lang/Appendable;ILorg/jsoup/nodes/Document$OutputSettings;)V",
            "method_body": "void outerHtmlTail(Appendable accum, int depth, Document.OutputSettings out) {\n}",
            "method_id": 3
        },
        {
            "method_signature": "org.jsoup.nodes.DocumentType:nodeName()Ljava/lang/String;",
            "method_body": "public String nodeName() {\nreturn \"#doctype\";\n}",
            "method_id": 4
        },
        {
            "method_signature": "org.jsoup.nodes.Document:<init>(Ljava/lang/String;)V",
            "method_body": "private OutputSettings outputSettings = new OutputSettings();\nprivate QuirksMode quirksMode = QuirksMode.noQuirks;\nprivate boolean updateMetaCharset = false;\nsuper(Tag.valueOf(\"#root\", ParseSettings.htmlDefault), baseUri);\nthis.location = baseUri;\n}",
            "method_id": 5
        },
        {
            "method_signature": "org.jsoup.nodes.Node:ownerDocument()Lorg/jsoup/nodes/Document;",
            "method_body": "public Document ownerDocument() {\nif (this instanceof Document)\nreturn (Document) this;\nelse if (parentNode == null)\nreturn parentNode.ownerDocument();\n}",
            "method_id": 6
        },
        {
            "method_signature": "org.jsoup.nodes.Document:outputSettings()Lorg/jsoup/nodes/Document$OutputSettings;",
            "method_body": "public OutputSettings outputSettings() {\nreturn outputSettings;\n}",
            "method_id": 7
        },
        {
            "method_signature": "org.jsoup.nodes.Document$OutputSettings:syntax(Lorg/jsoup/nodes/Document$OutputSettings$Syntax;)Lorg/jsoup/nodes/Document$OutputSettings;",
            "method_body": "public OutputSettings syntax(Syntax syntax) {\nthis.syntax = syntax;\nreturn this;\n}",
            "method_id": 8
        },
        {
            "method_signature": "org.jsoup.nodes.Document$OutputSettings:<init>()V",
            "method_body": "private Entities.EscapeMode escapeMode = Entities.EscapeMode.base;\nprivate Charset charset = Charset.forName(\"UTF-8\");\nprivate boolean prettyPrint = true;\nprivate boolean outline = false;\nprivate int indentAmount = 1;\nprivate Syntax syntax = Syntax.html;\npublic OutputSettings() {}",
            "method_id": 9
        },
        {
            "method_signature": "org.jsoup.parser.HtmlTreeBuilder:getDocument()Lorg/jsoup/nodes/Document;",
            "method_body": "Document getDocument() {\nreturn doc;\n}",
            "method_id": 10
        },
        {
            "method_signature": "org.jsoup.nodes.Document$OutputSettings:syntax()Lorg/jsoup/nodes/Document$OutputSettings$Syntax;",
            "method_body": "public Syntax syntax() {\nreturn syntax;\n}",
            "method_id": 11
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$54:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nif (r.isEmpty()) {\nif (r.matchesAny('\\t', '\\n', '\\r', '\\f', ' '))\nelse if (r.matches('>')) {\n} else if (r.matchConsumeIgnoreCase(DocumentType.PUBLIC_KEY)) {\nt.transition(AfterDoctypePublicKeyword);\n} else if (r.matchConsumeIgnoreCase(DocumentType.SYSTEM_KEY)) {\nt.transition(AfterDoctypeSystemKeyword);\n}",
            "method_id": 12
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$61:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nchar c = r.consume();\nswitch (c) {\nt.transition(BeforeDoctypeSystemIdentifier);\nbreak;\n}",
            "method_id": 13
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$62:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nchar c = r.consume();\nswitch (c) {\nt.transition(DoctypeSystemIdentifier_doubleQuoted);\nbreak;\n}",
            "method_id": 14
        },
        {
            "method_signature": "org.jsoup.parser.XmlTreeBuilder:insert(Lorg/jsoup/parser/Token$Doctype;)V",
            "method_body": "void insert(Token.Doctype d) {\nDocumentType doctypeNode = new DocumentType(settings.normalizeTag(d.getName()), d.getPublicIdentifier(), d.getSystemIdentifier(), baseUri);\ninsertNode(doctypeNode);\n}",
            "method_id": 15
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$53:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nif (r.matchesLetter()) {\nString name = r.consumeLetterSequence();\nt.doctypePending.name.append(name);\nreturn;\nchar c = r.consume();\nswitch (c) {\nt.emitDoctypePending();\nt.transition(Data);\nbreak;\nt.transition(AfterDoctypeName);\nbreak;\n}",
            "method_id": 16
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$60:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nchar c = r.consume();\nswitch (c) {\nt.error(this);\nt.transition(DoctypeSystemIdentifier_doubleQuoted);\nbreak;\n}",
            "method_id": 17
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$63:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nchar c = r.consume();\nswitch (c) {\nt.transition(AfterDoctypeSystemIdentifier);\nbreak;\nt.doctypePending.systemIdentifier.append(c);\n}",
            "method_id": 18
        },
        {
            "method_signature": "org.jsoup.parser.TokeniserState$65:read(Lorg/jsoup/parser/Tokeniser;Lorg/jsoup/parser/CharacterReader;)V",
            "method_body": "void read(Tokeniser t, CharacterReader r) {\nchar c = r.consume();\nswitch (c) {\nt.emitDoctypePending();\nt.transition(Data);\nbreak;\n}",
            "method_id": 19
        }
    ]
}