{
    "bug_id": 23,
    "test_id": 0,
    "test_name": "org.mockitousage.stubbing.DeepStubsSerializableTest.should_serialize_and_deserialize_mock_created_by_deep_stubs",
    "test_body": "public void should_serialize_and_deserialize_mock_created_by_deep_stubs() throws Exception {\n// given\nSampleClass sampleClass = mock(SampleClass.class, withSettings().defaultAnswer(Mockito.RETURNS_DEEP_STUBS).serializable());\nwhen(sampleClass.getSample().isSth()).thenReturn(STUBBED_BOOLEAN_VALUE);\nwhen(sampleClass.getSample().getNumber()).thenReturn(STUBBED_INTEGER_VALUE);\n24: // when\nObject o = SimpleSerializationUtil.serializeAndBack(sampleClass);\n27: // then\nassertThat(o).isInstanceOf(SampleClass.class);\nSampleClass deserializedSample = (SampleClass) o;\nassertThat(deserializedSample.getSample().isSth()).isEqualTo(STUBBED_BOOLEAN_VALUE);\nassertThat(deserializedSample.getSample().getNumber()).isEqualTo(STUBBED_INTEGER_VALUE);\n}\n",
    "stack_trace": "java.io.NotSerializableException: org.mockito.internal.stubbing.defaultanswers.ReturnsDeepStubs$2\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\nat java.util.concurrent.ConcurrentLinkedQueue.writeObject(ConcurrentLinkedQueue.java:769)\nat sun.reflect.GeneratedMethodAccessor33.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1140)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\nat org.mockitoutil.SimpleSerializationUtil.serializeMock(SimpleSerializationUtil.java:34)\nat org.mockitoutil.SimpleSerializationUtil.serializeAndBack(SimpleSerializationUtil.java:16)\nat org.mockitousage.stubbing.DeepStubsSerializableTest.should_serialize_and_deserialize_mock_created_by_deep_stubs(DeepStubsSerializableTest.java:25)",
    "covered_methods": [
        {
            "method_signature": "org.mockito.internal.creation.cglib.MockitoNamingPolicy:getTag()Ljava/lang/String;",
            "method_body": "protected String getTag() {\nreturn \"ByMockitoWithCGLIB\";\n}",
            "method_id": 150,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.InvocationImpl:getArguments()[Ljava/lang/Object;",
            "method_body": "public Object[] getArguments() {\nreturn arguments;\n}",
            "method_id": 151,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.DelegatingMethod:getJavaMethod()Ljava/lang/reflect/Method;",
            "method_body": "public Method getJavaMethod() {\nreturn method;\n}",
            "method_id": 152,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.progress.ThreadSafeMockingProgress:pullOngoingStubbing()Lorg/mockito/internal/progress/IOngoingStubbing;",
            "method_body": "public IOngoingStubbing pullOngoingStubbing() {\nreturn threadSafely().pullOngoingStubbing();\n}",
            "method_id": 153,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.configuration.GlobalConfiguration:validate()V",
            "method_body": "public static void validate() {\nnew GlobalConfiguration();\n}",
            "method_id": 154,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.InvocationContainerImpl:resetInvocationForPotentialStubbing(Lorg/mockito/internal/invocation/InvocationMatcher;)V",
            "method_body": "public void resetInvocationForPotentialStubbing(InvocationMatcher invocationMatcher) {\nthis.invocationForStubbing = invocationMatcher;\n}",
            "method_id": 155,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.jmock.ClassImposterizer$2:accept(Ljava/lang/reflect/Method;)I",
            "method_body": "public int accept(Method method) {\nreturn method.isBridge() ? 1 : 0;\n}",
            "method_id": 156,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:getTypeToMock()Ljava/lang/Class;",
            "method_body": "public Class<T> getTypeToMock() {\nreturn typeToMock;\n}",
            "method_id": 157,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:isSerializable()Z",
            "method_body": "public boolean isSerializable() {\nreturn serializableMode != SerializableMode.NONE;\n}",
            "method_id": 158,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.progress.SequenceNumber:next()I",
            "method_body": "public static synchronized int next() {\nreturn sequenceNumber++;\n}",
            "method_id": 159,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.InvocationImpl:getMock()Ljava/lang/Object;",
            "method_body": "public Object getMock() {\nreturn mock;\n}",
            "method_id": 160,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.realmethod.FilteredCGLIBProxyRealMethod:<init>(Lorg/mockito/internal/invocation/realmethod/RealMethod;)V",
            "method_body": "public FilteredCGLIBProxyRealMethod(RealMethod realMethod) {\nthis.realMethod = realMethod;\n}",
            "method_id": 161,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:getSerializableMode()Lorg/mockito/mock/SerializableMode;",
            "method_body": "public SerializableMode getSerializableMode() {\nreturn serializableMode;\n}",
            "method_id": 162,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.AcrossJVMSerializationFeature:isWriteReplace(Ljava/lang/reflect/Method;)Z",
            "method_body": "public boolean isWriteReplace(Method method) {\nreturn  method.getReturnType() == Object.class\n}",
            "method_id": 163,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.realmethod.FilteredCGLIBProxyRealMethod:<init>(Lorg/mockito/internal/creation/MockitoMethodProxy;)V",
            "method_body": "public FilteredCGLIBProxyRealMethod(MockitoMethodProxy methodProxy) {\nthis(new CGLIBProxyRealMethod(methodProxy));\n}",
            "method_id": 164,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.util.MockUtil:isMockitoMock(Ljava/lang/Object;)Z",
            "method_body": "private <T> boolean isMockitoMock(T mock) {\nreturn mockMaker.getHandler(mock) != null;\n}",
            "method_id": 165,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.MatchersBinder:validateMatchers(Lorg/mockito/invocation/Invocation;Ljava/util/List;)V",
            "method_body": "private void validateMatchers(Invocation invocation, List<LocalizedMatcher> lastMatchers) {\nif (!lastMatchers.isEmpty()) {\n}",
            "method_id": 166,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.progress.MockingProgressImpl:getArgumentMatcherStorage()Lorg/mockito/internal/progress/ArgumentMatcherStorage;",
            "method_body": "public ArgumentMatcherStorage getArgumentMatcherStorage() {\nreturn argumentMatcherStorage;\n}",
            "method_id": 167,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.answers.Returns:returnsNull()Z",
            "method_body": "public boolean returnsNull() {\nreturn value == null;\n}",
            "method_id": 168,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.progress.ArgumentMatcherStorageImpl:validateState()V",
            "method_body": "public void validateState() {\nif (!matcherStack.isEmpty()) {\n}",
            "method_id": 169,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.progress.MockingProgressImpl:reportOngoingStubbing(Lorg/mockito/internal/progress/IOngoingStubbing;)V",
            "method_body": "public void reportOngoingStubbing(IOngoingStubbing iOngoingStubbing) {\nthis.iOngoingStubbing = iOngoingStubbing;\n}",
            "method_id": 170,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.InvocationContainerImpl:hasInvocationForPotentialStubbing()Z",
            "method_body": "public boolean hasInvocationForPotentialStubbing() {\nreturn !registeredInvocations.isEmpty();\n}",
            "method_id": 171,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.jmock.ClassImposterizer:imposterise(Lorg/mockito/cglib/proxy/MethodInterceptor;Ljava/lang/Class;Ljava/util/Collection;)Ljava/lang/Object;",
            "method_body": "public <T> T imposterise(final MethodInterceptor interceptor, Class<T> mockedType, Collection<Class> ancillaryTypes) {\nreturn imposterise(interceptor, mockedType, ancillaryTypes.toArray(new Class[ancillaryTypes.size()]));\n}",
            "method_id": 172,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.SerializableMethod:isVarArgs()Z",
            "method_body": "public boolean isVarArgs() {\nreturn isVarArgs;\n}",
            "method_id": 173,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.InvocationContainerImpl:hasAnswersForStubbing()Z",
            "method_body": "public boolean hasAnswersForStubbing() {\nreturn !answersForStubbing.isEmpty();\n}",
            "method_id": 174,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:getName()Ljava/lang/String;",
            "method_body": "public String getName() {\nreturn name;\n}",
            "method_id": 175,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:getExtraInterfaces()Ljava/util/Set;",
            "method_body": "public Set<Class> getExtraInterfaces() {\nreturn extraInterfaces;\n}",
            "method_id": 176,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.StubInfoImpl:<init>(Lorg/mockito/invocation/DescribedInvocation;)V",
            "method_body": "public StubInfoImpl(DescribedInvocation stubbedAt) {\nthis.stubbedAt = stubbedAt;\n}",
            "method_id": 177,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.handler.MockHandlerImpl:getInvocationContainer()Lorg/mockito/internal/stubbing/InvocationContainer;",
            "method_body": "public InvocationContainer getInvocationContainer() {\nreturn invocationContainerImpl;\n}",
            "method_id": 178,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.settings.CreationSettings:getInvocationListeners()Ljava/util/List;",
            "method_body": "public List<InvocationListener> getInvocationListeners() {\nreturn invocationListeners;\n}",
            "method_id": 179,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.handler.NullResultGuardian:getInvocationContainer()Lorg/mockito/internal/stubbing/InvocationContainer;",
            "method_body": "public InvocationContainer getInvocationContainer() {\nreturn delegate.getInvocationContainer();\n}",
            "method_id": 180,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.util.Primitives:defaultValueForPrimitiveOrWrapper(Ljava/lang/Class;)Ljava/lang/Object;",
            "method_body": "public static <T> T defaultValueForPrimitiveOrWrapper(Class<T> primitiveOrWrapperType) {\nreturn (T) primitiveOrWrapperDefaultValues.get(primitiveOrWrapperType);\n}",
            "method_id": 181,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.Whitebox:getField(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/reflect/Field;",
            "method_body": "private static Field getField(Class<?> clazz, String field) {\nreturn clazz.getDeclaredField(field);\n}",
            "method_id": 182,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.InvocationMatcher:matches(Lorg/mockito/invocation/Invocation;)Z",
            "method_body": "public boolean matches(Invocation actual) {\nreturn invocation.getMock().equals(actual.getMock())\n}",
            "method_id": 183,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.handler.MockHandlerImpl:getMockSettings()Lorg/mockito/mock/MockCreationSettings;",
            "method_body": "public MockCreationSettings getMockSettings() {\nreturn mockSettings;\n}",
            "method_id": 184,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.invocation.SerializableMethod:getJavaMethod()Ljava/lang/reflect/Method;",
            "method_body": "public Method getJavaMethod() {\nreturn declaringClass.getDeclaredMethod(methodName, parameterTypes);\n}",
            "method_id": 185,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.InvocationContainerImpl:createRegisteredInvocations(Lorg/mockito/mock/MockCreationSettings;)Lorg/mockito/internal/verification/RegisteredInvocations;",
            "method_body": "private RegisteredInvocations createRegisteredInvocations(MockCreationSettings mockSettings) {\nreturn mockSettings.isStubOnly()\n}",
            "method_id": 186,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.util.reflection.GenericMetadataSupport:registerTypeParametersOn([Ljava/lang/reflect/TypeVariable;)V",
            "method_body": "protected void registerTypeParametersOn(TypeVariable[] typeParameters) {\nfor (TypeVariable typeParameter : typeParameters) {\n}",
            "method_id": 187,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.stubbing.answers.Returns:<init>(Ljava/lang/Object;)V",
            "method_body": "public Returns(Object value) {\nthis.value = value;\n}",
            "method_id": 188,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.util.ObjectMethodsGuru:isHashCodeMethod(Ljava/lang/reflect/Method;)Z",
            "method_body": "public boolean isHashCodeMethod(Method method) {\nreturn method.getName().equals(\"hashCode\")\n}",
            "method_id": 189,
            "loc": 3
        },
        {
            "method_signature": "org.mockito.internal.creation.MethodInterceptorFilter:getHandler()Lorg/mockito/invocation/MockHandler;",
            "method_body": "public MockHandler getHandler() {\nreturn handler;\n}",
            "method_id": 190,
            "loc": 3
        }
    ]
}