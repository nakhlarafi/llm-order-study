{
    "bug_id": 6,
    "test_id": 5,
    "test_name": "org.apache.commons.math3.optim.nonlinear.scalar.noderiv.SimplexOptimizerNelderMeadTest.testMaximize1",
    "test_body": "public void testMaximize1() {\nSimplexOptimizer optimizer = new SimplexOptimizer(1e-10, 1e-30);\nfinal FourExtrema fourExtrema = new FourExtrema();\n100: final PointValuePair optimum\n= optimizer.optimize(new MaxEval(100),\nnew ObjectiveFunction(fourExtrema),\nGoalType.MAXIMIZE,\nnew InitialGuess(new double[] { -3, 0 }),\nnew NelderMeadSimplex(new double[] { 0.2, 0.2 }));\nAssert.assertEquals(fourExtrema.xM, optimum.getPoint()[0], 1e-5);\nAssert.assertEquals(fourExtrema.yM, optimum.getPoint()[1], 3e-6);\nAssert.assertEquals(fourExtrema.valueXmYm, optimum.getValue(), 3e-12);\nAssert.assertTrue(optimizer.getEvaluations() > 60);\nAssert.assertTrue(optimizer.getEvaluations() < 90);\n112: // Check that the number of iterations is updated (MATH-949).\nAssert.assertTrue(optimizer.getIterations() > 0);\n}\n",
    "stack_trace": "junit.framework.AssertionFailedError\nat org.junit.Assert.fail(Assert.java:86)\nat org.junit.Assert.assertTrue(Assert.java:41)\nat org.junit.Assert.assertTrue(Assert.java:52)\nat org.apache.commons.math3.optim.nonlinear.scalar.noderiv.SimplexOptimizerNelderMeadTest.testMaximize1(SimplexOptimizerNelderMeadTest.java:113)",
    "covered_methods": [
        {
            "method_signature": "org.apache.commons.math3.optim.nonlinear.scalar.noderiv.AbstractSimplex:getDimension()I",
            "method_body": "public int getDimension() {\nreturn dimension;\n}",
            "method_id": 40
        },
        {
            "method_signature": "org.apache.commons.math3.optim.PointValuePair:<init>([DDZ)V",
            "method_body": "public PointValuePair(final double[] point,\nsuper(copyArray ? ((point == null) ? null :\n}",
            "method_id": 41
        },
        {
            "method_signature": "org.apache.commons.math3.optim.BaseOptimizer:<init>(Lorg/apache/commons/math3/optim/ConvergenceChecker;)V",
            "method_body": "protected BaseOptimizer(ConvergenceChecker<PAIR> checker) {\nthis.checker = checker;\nevaluations = new Incrementor(0, new MaxEvalCallback());\niterations = new Incrementor(0, new MaxIterCallback());\n}",
            "method_id": 42
        },
        {
            "method_signature": "org.apache.commons.math3.util.FastMath:max(DD)D",
            "method_body": "public static double max(final double a, final double b) {\nif (a > b) {\nreturn a;\nif (a < b) {\nreturn b;\nif (a != b) {\nreturn Double.NaN;\nlong bits = Double.doubleToRawLongBits(a);\nif (bits == 0x8000000000000000L) {\nreturn a;\n}",
            "method_id": 43
        },
        {
            "method_signature": "org.apache.commons.math3.util.Pair:<init>(Ljava/lang/Object;Ljava/lang/Object;)V",
            "method_body": "public Pair(K k, V v) {\nkey = k;\nvalue = v;\n}",
            "method_id": 44
        },
        {
            "method_signature": "org.apache.commons.math3.optim.BaseOptimizer:incrementEvaluationCount()V",
            "method_body": "protected abstract PAIR doOptimize();\nevaluations.incrementCount();\n}",
            "method_id": 45
        },
        {
            "method_signature": "org.apache.commons.math3.optim.nonlinear.scalar.noderiv.NelderMeadSimplex:iterate(Lorg/apache/commons/math3/analysis/MultivariateFunction;Ljava/util/Comparator;)V",
            "method_body": "public void iterate(final MultivariateFunction evaluationFunction,\nfinal int n = getDimension();\nfinal PointValuePair best = getPoint(0);\nfinal PointValuePair secondBest = getPoint(n - 1);\nfinal PointValuePair worst = getPoint(n);\nfinal double[] xWorst = worst.getPointRef();\nfinal double[] centroid = new double[n];\nfor (int i = 0; i < n; i++) {\nfinal double[] x = getPoint(i).getPointRef();\nfor (int j = 0; j < n; j++) {\ncentroid[j] += x[j];\nfinal double scaling = 1.0 / n;\nfor (int j = 0; j < n; j++) {\ncentroid[j] *= scaling;\nfinal double[] xR = new double[n];\nfor (int j = 0; j < n; j++) {\nxR[j] = centroid[j] + rho * (centroid[j] - xWorst[j]);\nfinal PointValuePair reflected\nif (comparator.compare(best, reflected) <= 0 &&\nreplaceWorstPoint(reflected, comparator);\n} else if (comparator.compare(reflected, best) < 0) {\nfinal double[] xE = new double[n];\nfor (int j = 0; j < n; j++) {\nxE[j] = centroid[j] + khi * (xR[j] - centroid[j]);\nfinal PointValuePair expanded\nif (comparator.compare(expanded, reflected) < 0) {\nreplaceWorstPoint(expanded, comparator);\nreplaceWorstPoint(reflected, comparator);\n} else {\nif (comparator.compare(reflected, worst) < 0) {\nfinal double[] xC = new double[n];\nfor (int j = 0; j < n; j++) {\nxC[j] = centroid[j] + gamma * (xR[j] - centroid[j]);\nfinal PointValuePair outContracted\nif (comparator.compare(outContracted, reflected) <= 0) {\nreplaceWorstPoint(outContracted, comparator);\nreturn;\nfinal double[] xC = new double[n];\nfor (int j = 0; j < n; j++) {\nxC[j] = centroid[j] - gamma * (centroid[j] - xWorst[j]);\nfinal PointValuePair inContracted\nif (comparator.compare(inContracted, worst) < 0) {\nreplaceWorstPoint(inContracted, comparator);\nreturn;\n}",
            "method_id": 46
        },
        {
            "method_signature": "org.apache.commons.math3.optim.nonlinear.scalar.noderiv.AbstractSimplex:getPoints()[Lorg/apache/commons/math3/optim/PointValuePair;",
            "method_body": "public PointValuePair[] getPoints() {\nfinal PointValuePair[] copy = new PointValuePair[simplex.length];\nSystem.arraycopy(simplex, 0, copy, 0, simplex.length);\nreturn copy;\n}",
            "method_id": 47
        },
        {
            "method_signature": "org.apache.commons.math3.optim.nonlinear.scalar.MultivariateOptimizer:parseOptimizationData([Lorg/apache/commons/math3/optim/OptimizationData;)V",
            "method_body": "protected void parseOptimizationData(OptimizationData... optData) {\nsuper.parseOptimizationData(optData);\nfor (OptimizationData data : optData) {\nif (data instanceof GoalType) {\ngoal = (GoalType) data;\ncontinue;\nif (data instanceof ObjectiveFunction) {\nfunction = ((ObjectiveFunction) data).getObjectiveFunction();\ncontinue;\n}",
            "method_id": 48
        },
        {
            "method_signature": "org.apache.commons.math3.util.Pair:getKey()Ljava/lang/Object;",
            "method_body": "public K getKey() {\nreturn key;\n}",
            "method_id": 49
        }
    ]
}