{
    "bug_id": 84,
    "test_id": 0,
    "test_name": "org.apache.commons.math.optimization.direct.MultiDirectionalTest.testMath283",
    "test_body": "public void testMath283()\nthrows FunctionEvaluationException, OptimizationException {\n// fails because MultiDirectional.iterateSimplex is looping forever\n// the while(true) should be replaced with a convergence check\nMultiDirectional multiDirectional = new MultiDirectional();\nmultiDirectional.setMaxIterations(100);\nmultiDirectional.setMaxEvaluations(1000);\n201: final Gaussian2D function = new Gaussian2D(0.0, 0.0, 1.0);\n203: RealPointValuePair estimate = multiDirectional.optimize(function,\nGoalType.MAXIMIZE, function.getMaximumPosition());",
    "stack_trace": "org.apache.commons.math.optimization.OptimizationException: org.apache.commons.math.MaxIterationsExceededException: Maximal number of iterations (100) exceeded\nat org.apache.commons.math.optimization.direct.DirectSearchOptimizer.incrementIterationsCounter(DirectSearchOptimizer.java:320)\nat org.apache.commons.math.optimization.direct.MultiDirectional.iterateSimplex(MultiDirectional.java:66)\nat org.apache.commons.math.optimization.direct.DirectSearchOptimizer.optimize(DirectSearchOptimizer.java:307)\nat org.apache.commons.math.optimization.direct.MultiDirectionalTest.testMath283(MultiDirectionalTest.java:203)",
    "covered_methods": [
        {
            "method_signature": "org.apache.commons.math.MathException:buildMessage(Ljava/util/Locale;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;",
            "method_body": "private static String buildMessage(Locale locale, String pattern, Object ... arguments) {\nreturn (pattern == null) ? \"\" : new MessageFormat(translate(pattern, locale), locale).format(arguments);\n}",
            "method_id": 10
        },
        {
            "method_signature": "org.apache.commons.math.MathException:getLocalizedMessage()Ljava/lang/String;",
            "method_body": "public String getLocalizedMessage() {\nreturn getMessage(Locale.getDefault());\n}",
            "method_id": 11
        },
        {
            "method_signature": "org.apache.commons.math.optimization.direct.DirectSearchOptimizer:incrementIterationsCounter()V",
            "method_body": "protected void incrementIterationsCounter()\nif (++iterations > maxIterations) {\nthrow new OptimizationException(new MaxIterationsExceededException(maxIterations));\n}",
            "method_id": 12
        },
        {
            "method_signature": "org.apache.commons.math.optimization.direct.DirectSearchOptimizer:evaluateSimplex(Ljava/util/Comparator;)V",
            "method_body": "protected void evaluateSimplex(final Comparator<RealPointValuePair> comparator)\nfor (int i = 0; i < simplex.length; ++i) {\nfinal RealPointValuePair vertex = simplex[i];\nfinal double[] point = vertex.getPointRef();\nif (Double.isNaN(vertex.getValue())) {\nsimplex[i] = new RealPointValuePair(point, evaluate(point), false);\nArrays.sort(simplex, comparator);\n}",
            "method_id": 13
        },
        {
            "method_signature": "org.apache.commons.math.optimization.RealPointValuePair:<init>([DDZ)V",
            "method_body": "public RealPointValuePair(final double[] point, final double value,\nfinal boolean copyArray) {\nthis.point = copyArray ? point.clone() : point;\nthis.value  = value;\n}",
            "method_id": 14
        },
        {
            "method_signature": "org.apache.commons.math.MathException:getMessage(Ljava/util/Locale;)Ljava/lang/String;",
            "method_body": "public String getMessage(Locale locale) {\nreturn buildMessage(locale, pattern, arguments);\n}",
            "method_id": 15
        },
        {
            "method_signature": "org.apache.commons.math.optimization.direct.DirectSearchOptimizer$1:compare(Lorg/apache/commons/math/optimization/RealPointValuePair;Lorg/apache/commons/math/optimization/RealPointValuePair;)I",
            "method_body": "public RealPointValuePair optimize(final MultivariateRealFunction f,\nif (startConfiguration == null) {\nfinal double[] unit = new double[startPoint.length];\nArrays.fill(unit, 1.0);\nsetStartConfiguration(unit);\nthis.f = f;\nfinal Comparator<RealPointValuePair> comparator =\nnew Comparator<RealPointValuePair>() {\nfinal double v1 = o1.getValue();\nfinal double v2 = o2.getValue();\nreturn (goalType == GoalType.MINIMIZE) ?\niterations  = 0;\nevaluations = 0;\nbuildSimplex(startPoint);\nevaluateSimplex(comparator);\nRealPointValuePair[] previous = new RealPointValuePair[simplex.length];\nif (iterations > 0) {\nboolean converged = true;\nfor (int i = 0; i < simplex.length; ++i) {\nconverged &= checker.converged(iterations, previous[i], simplex[i]);\nif (converged) {\nreturn simplex[0];\nSystem.arraycopy(simplex, 0, previous, 0, simplex.length);\niterateSimplex(comparator);\n}",
            "method_id": 16
        },
        {
            "method_signature": "org.apache.commons.math.optimization.RealPointValuePair:getPointRef()[D",
            "method_body": "public double[] getPointRef() {\nreturn point;\n}",
            "method_id": 17
        },
        {
            "method_signature": "org.apache.commons.math.optimization.RealPointValuePair:<init>([DD)V",
            "method_body": "public RealPointValuePair(final double[] point, final double value) {\nthis.point = point.clone();\nthis.value  = value;\n}",
            "method_id": 18
        },
        {
            "method_signature": "org.apache.commons.math.ConvergenceException:<init>(Ljava/lang/String;[Ljava/lang/Object;)V",
            "method_body": "public ConvergenceException(String pattern, Object ... arguments) {\nsuper(pattern, arguments);\n}",
            "method_id": 19
        }
    ]
}